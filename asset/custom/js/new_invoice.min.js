$(document).ready(function(){$("#btnSaveInvoice").click(function(){if(($("#cusName").val()=="")||($("#cusName").val()=="-")){alert("กรุณาใส่ ชื่อ-นามสกุลลูกค้า !");$("#cusName").focus();return false}else{if(($("#cusAddress").val()=="")||($("#cusAddress").val()=="-")){alert("กรุณาใส่ ที่อยู่ลูกค้า !");$("#cusAddress").focus();return false}else{if(($("#cusTaxID").val()=="")||($("#cusTaxID").val()=="-")){alert("กรุณาใส่ เลขที่ผู้เสียภาษี / Passport ลูกค้า !");$("#cusTaxID").focus();return false}else{var o="ต้องการบันทึกใบกำกับภาษีนี้ ใช่หรือไม่ !";if(confirm(o)){$("#btnSaveInvoice").attr("disabled",true);var c=$("#customer_id").val();var e=$("#cusName").val();var l=$("#cusTelephone").val();var d=$("#cusAddress").val();var f=$("#cusTaxID").val();var k=$("#remark").val();var h=$("#payment_id").val();var i=$("#shop_company").val();var b=$("#shop_address1").val();var n=$("#shop_address2").val();var m=$("#shop_taxid").val();var a=$("#shop_branch_no").val();var g=$("#shop_telephone").val();var j=$("#shop_fax").val();$.ajax({type:"POST",url:link_save_invoice,data:{customer_id:c,customer_name:e,customer_telephone:l,customer_address:d,customer_taxid:f,remark:k,payment_id:h,shop_company:i,shop_address1:b,shop_address2:n,shop_taxid:m,shop_branch_no:a,shop_telephone:g,shop_fax:j},dataType:"json",success:function(p){if(p>0){alert("ทำการบันทึกข้อมูลเรียบร้อยแล้ว !");$("#btnSaveInvoice").attr("disabled",false);window.location=link_view_invoice+"/"+p}else{alert("ไม่สามารถบันทึกใบกำกับภาษีได้ !!!");$("#btnSaveInvoice").attr("disabled",false)}},error:function(q,p){alert("ไม่สามารถบันทึกใบกำกับภาษีได้ !!!");$("#btnSaveInvoice").attr("disabled",false)}})}else{return false}}}}});$("#cusTelephone").keyup(function(b){if(b.keyCode==13){var a=$.trim($(this).val());if(a!=""){check_customer(a)}}});$("#btnSelectProductType").click(function(){var a="ต้องการให้ข้อมูลทั้งหมดในหน้านี้ ถูกลบใช่หรือไม่ !";return confirm(a)})});function check_customer(a){if(a!=""){$.ajax({type:"POST",url:link_customer,data:{telephone:a},dataType:"json",success:function(b){if(b.posc_id>0){$("#customer_id").val(b.posc_id);$("#cusName").val(b.posc_name);$("#cusAddress").val(b.posc_address);$("#cusTaxID").val(b.posc_taxid)}else{alert("ไม่พบ ข้อมูลลูกค้า ที่ต้องการ");$("#customer_id").val("0");$("#cusTelephone").val("");$("#cusName").val("");$("#cusAddress").val("");$("#cusTaxID").val("")}},error:function(c,b){alert("ไม่พบ ข้อมูลลูกค้า ที่ต้องการ !!!");$("#customer_id").val("0");$("#cusTelephone").val("");$("#cusName").val("");$("#cusAddress").val("");$("#cusTaxID").val("")}})}};