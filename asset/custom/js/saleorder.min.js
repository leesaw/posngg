var count_enter_form_input_product=0;var count_list=0;$("#barcode").focus();$("#barcode").keyup(function(a){if(a.keyCode==13){var b=$.trim($(this).val());if(b!=""){check_barcode(b)}$(this).val("");setTimeout(function(){calculate()},300)}});function check_barcode(a){if(a!=""){$.ajax({type:"POST",url:link,data:{barcode:a},success:function(c){if(c!=""){var b='<tr id="row'+count_enter_form_input_product+'"><td><button type="button" id="row'+count_enter_form_input_product+'" class="btn btn-danger btn-xs" onClick="delete_item_row('+count_enter_form_input_product+');"><i class="fa fa-close"></i></button></td>'+c+"</tr>";$("table > tbody").append(b);count_enter_form_input_product++;count_list++}else{alert("ไม่พบ Barcode ที่ต้องการ")}}})}setTimeout(function(){calculate()},300)}function calculate(){var d=0;var c=0;var e=document.getElementsByName("it_srp");var f=document.getElementsByName("it_quantity");var a=document.getElementsByName("it_discount");for(var b=0;b<f.length;b++){if(a[b].value==""){a[b].value=0}if(f[b].value==""){f[b].value=0}d+=parseInt(f[b].value);c+=parseInt(f[b].value)*parseInt(e[b].value)-parseInt((a[b].value).replace(/,/g,""))}document.getElementById("summary").innerHTML=c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" บาท";document.getElementById("allcount").innerHTML=d.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function delete_item_row(a){count_list--;$("#row"+a).remove();setTimeout(function(){calculate()},300)}function numberWithCommas(c){var a=$(c).val();var b=a.toString().split(".");b[0]=b[0].replace(/,/g,"");b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");$(c).val(b.join("."))};