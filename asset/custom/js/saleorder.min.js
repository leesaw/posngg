var count_enter_form_input_product=0;var count_list=0;$("#barcode").focus();$("#barcode").keyup(function(a){if(a.keyCode==13){var b=$.trim($(this).val());if(b!=""){check_barcode(b)}$(this).val("")}});function check_barcode(a){if(a!=""){$.ajax({type:"POST",url:link,data:{barcode:a},success:function(c){if(c!=""){var b='<tr id="row'+count_enter_form_input_product+'"><td><button type="button" id="row'+count_enter_form_input_product+'" class="btn btn-danger btn-xs" onClick="delete_item_row('+count_enter_form_input_product+');"><i class="fa fa-close"></i></button></td>'+c+"</tr>";$("#itemlist > tbody").append(b);count_enter_form_input_product++;count_list++}else{alert("ไม่พบ Barcode ที่ต้องการ")}}})}setTimeout(function(){calculate()},1000)}function calculate(){var e=0;var f=0;var h=0;var a=0;var g=0;var c=document.getElementsByName("it_srp");var l=document.getElementsByName("it_quantity");var k=document.getElementsByName("it_discount");var j=document.getElementsByName("it_net");var d=document.getElementsByName("it_dc_percent");for(var b=0;b<l.length;b++){if(k[b].value==""){k[b].value=0}if(l[b].value==""){l[b].value=0}if(d[b].value==""){d[b].value=0}e+=parseFloat(l[b].value);h+=parseFloat(l[b].value)*parseFloat(c[b].value);g=parseFloat(l[b].value)*parseFloat(c[b].value)*(parseFloat(d[b].value)/100);if(g>0){k[b].value=g.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}a+=parseFloat((k[b].value).replace(/,/g,""));f+=parseFloat(l[b].value)*parseFloat(c[b].value)-parseFloat((k[b].value).replace(/,/g,""));j[b].value=(parseFloat(l[b].value)*parseFloat(c[b].value)-parseFloat((k[b].value).replace(/,/g,""))).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}document.getElementById("summary").innerHTML=f.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" บาท";document.getElementById("allcount").innerHTML=e.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");document.getElementById("sum_srp").innerHTML=h.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");document.getElementById("sum_dc").innerHTML=a.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");document.getElementById("sum_net").innerHTML=f.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function delete_item_row(a){count_list--;$("#row"+a).remove();setTimeout(function(){calculate()},300)}function numberWithCommas(c){var a=$(c).val();var b=a.toString().split(".");b[0]=b[0].replace(/,/g,"");b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");$(c).val(b.join("."))};